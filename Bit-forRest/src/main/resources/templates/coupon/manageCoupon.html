<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<!--  ///////////////////////// CSS ////////////////////////// -->
<style type="text/css">

.formData{
	margin: 10px 0px 10px 0px;
}
.left{
	margin: 20px 0px 20px 0px;
}
.right{
	margin: 20px 0px 20px 0px;
}
.couponList{
	margin: 30px 0px 30px 0px;
}
</style>
	
	
	
</head>

<body>
<!-- 툴바 include -->
<div th:replace="/main/toolbarForAdmin.html"></div>
<div th:replace="/main/leftbarForAdmin.html"></div>

<!-- hidden data -->
<input type="hidden" id="currentPage" name="currentPage" value=""/>


<!--  화면구성 div Start /////////////////////////////////////-->
<div class="container list">
	
	
	<div><!-- 쿠폰 생성/수정  -->
		<div>
			<h2 style="color: black; margin: 30px 0 30px 0px;">쿠폰관리</h2>
			<h3 style="color: black; margin: 15px 0 15px 0px;">쿠폰 생성/수정</h3>
		</div>
	
	<form>
 		<div class="formData" align="center">
			<div class="col-md-6 left">
				<div style="margin: 10px 0px 10px 30px;">
					<label>쿠폰이름</label>
					<input type="text" name="couponName" id="couponName">
				</div>
				<div style="margin: 10px 0px 10px 0px;">
					<label>쿠폰발급일자</label>
					<input type="text" name="couponCreDate" id="couponCreDate" readonly="readonly">
				</div>
			</div>
			<div class="col-md-6 right">
				<div style="margin: 10px 0px 10px 30px;">
					<label >할인내용</label>
					<input type="text" name="discount" id="discount">
				</div>
				<div style="margin: 10px 0px 10px 0px;">
					<label>쿠폰만료일자</label>
					<input type="text" name="couponDelDate" id="couponDelDate" readonly="readonly">
				</div>
			</div>
     </div>
	     <div align="center">
	     	<button type="button" class="btn btn-default conditionBtn" id="summit">등록/수정</button>
		</div>
     </form>
	</div><!-- 쿠폰 생성/수정  끝-->
	

	<div class="couponList">
      <h2 style="color: black; margin: 15px 0 15px 0;">쿠폰목록</h2>
      <table class="table table-hover table-striped">
	       <thead>
	          <tr class="tableHeader">
	            <th align="center">No</th>
	            <th align="center" >쿠폰번호</th>   
	            <th align="center">쿠폰이름</th>
	            <th align="center">할인내용</th>
	            <th align="center">쿠폰발급일자</th>	
	            <th align="center">쿠폰만료일자</th>
	            <th align="center">쿠폰수정</th>				
	          </tr>
	        </thead>
	        
	        <tbody>
			    <tr th:each="coupon,n :${list}" align="center">
			    	<td th:text = "${n.index+1}">
				    <td th:text = "${coupon.couponNo}"></td>
					<td th:text = "${coupon.couponName}"></td>
					<td th:text = "${coupon.discount}"></td>
					<td th:text = "${coupon.couponCreDate}"></td>
					<td th:text = "${coupon.couponDelDate}"></td>
					<td >
						<input type="button" value="수정" id="updateBtn" class="btn btn-default conditionBtn">
						<input type="button" value="삭제" id="deleteBtn" class="btn btn-default conditionBtn">
					</td>
			    </tr>
	        </tbody>

      </table>
      </div>
		<!--  table End /////////////////////////////////////-->
		
	</div>
<!--  화면구성 div End /////////////////////////////////////-->



</body>


<!--  ///////////////////////// java Script ////////////////////////// -->
	<script type="text/javascript">
		
	  $(function() {
			//==> DOM Object GET 3가지 방법 ==> 1. $(tagName) : 2.(#id) : 3.$(.className)
			$( "#summit" ).on("click" , function() {
				console.log("summit Click");
				fncAddCoupon();
			});
		});	
	 
	 function fncAddCoupon(){
		 
		 	var	couponName	=	$("input[name='couponName']").val();
		 	var discount	=	$("input[name='discount']").val();
		 	var couponCreDate =	$("input[name='couponCreDate']").val()+" 00:00:00";
		 	var	couponDelDate =	$("input[name='couponDelDate']").val()+" 00:00:00";
		 	$("input[name='couponDelDate']").val(couponDelDate);
		 	$("input[name='couponCreDate']").val(couponCreDate);
		 	
		 	
		 	if(couponName == null|| couponName.length<1){
		 		alert("쿠폰이름을 입력해 주세요");
		 		return;
		 	}
		 	if(discount == null|| discount.length<1){
		 		alert("할인내용을 입력해 주세요");
		 		return;
		 	}
		 	if(couponCreDate == null|| couponCreDate.length<1){
		 		alert("쿠폰발급일자를 입력해 주세요");
		 		return;
		 	}
		 	if(couponDelDate == null|| couponDelDate.length<1){
		 		alert("쿠폰만료일자를 입력해 주세요");
		 		return;
		 	}

		 	console.log("form");
 		  	$("form").attr("method" , "POST").attr("action" , "/coupon/addCoupon").submit();
 
	 } 
	
	</script>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script> $(function(){ 
		$('#couponCreDate,#couponDelDate').datepicker({
			dateFormat: 'yy-mm-dd',
			minDate: "+1D"
			}); 
		}) </script>

</html>